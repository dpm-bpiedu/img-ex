"use strict";(function e(){function t(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function n(e,n,o){var r=document.createElement("button");var i=document.createTextNode(n);r.appendChild(i);t(r,{type:"button","aria-label":"Close",class:e});r.addEventListener("click",o);return r}function o(e){return e.charAt(0).toUpperCase()+e.slice(1)}function r(e,t,n,o){var r=e.parentElement;var i=r.getAttribute(t);var l=o;var s=0;function a(){if(0===i.lastIndexOf(n,0))return true;else{s++;return false}}a();while(!a()){r=r.parentElement;i=r.getAttribute(t);if(10===s){console.log("Error: parent cannot be found");break}}return r.getAttribute(l)}function i(e,t){return(e*t).toString()+"px"}var l={triggers:document.querySelectorAll("[data-type=tipTrigger]"),boxes:document.querySelectorAll("[class^=tipBox]"),manageScreen:function e(n){if("open"===n){var o="position: fixed; top: 0; left: 0; right: 0; height: 100%; z-index: 4599; background-color: black; opacity: .65;";this.body=document.querySelector("body");this.screen=document.createElement("div");t(this.screen,{style:o,id:"tipBox_screen"});this.body.insertBefore(this.screen,this.body.firstChild);document.getElementsByTagName("html")[0].setAttribute("style","overflow: hidden;")}else if("close"===n){this.screen=document.getElementById("tipBox_screen");this.screen.remove();document.getElementsByTagName("html")[0].removeAttribute("style")}},setENV:function e(){if(null===document.querySelector("span.werd"))this.envIndex=0;else this.envIndex=1},setBoxes:function e(){this.boxes.forEach(function(e,t){s.setBox(e)})},setEsc:function e(){document.addEventListener("keydown",function(e){if(27===e.keyCode)s.closeBox()})},manageFocus:function e(t){if("open"===t){s.obj.focus();document.addEventListener("keydown",function(e){var t=s.obj.querySelectorAll("a, button, iframe, [tabindex]");var n=t[0];var o=t[t.length-1];var r="Tab"===e.key||9===e.keyCode;var i="escape"===e.key||27===e.keyCode;if(!r&&!i)return;if(e.shiftKey){if(document.activeElement===n){o.focus();e.preventDefault()}}else if(r)if(document.activeElement===o){n.focus();e.preventDefault()}})}else if("close"===t)a.obj.focus();else return},manageFlags:function e(){this.nhArr=document.querySelectorAll("[class^=tipBox] [class^=markup_bg_]");if(!this.nhArr.length)return;else this.nhArr.forEach(function(e,t){l.activeRef=r(e,"class","tipBox","id");s.obj=document.getElementById(l.activeRef);a.obj=document.querySelector("[aria-controls="+l.activeRef+"]");a.flag.manageFlags(6)})},setPage:function e(){this.setENV();this.setBoxes();this.setEsc();window.addEventListener("load",function(e){l.manageFlags()})}};var s={setBox:function e(n){this.content=n.children[l.envIndex];this.label=s.content.children[l.envIndex];this.content.setAttribute("role","document");this.label.setAttribute("id",""+n.id);this.labelText=this.label.textContent;t(n,{"aria-hidden":"true",role:"dialog",tabindex:0,"aria-labelledby":n.id+"-label"});a.obj=document.querySelector("[href$="+n.id+"]");a.setTrigger(this.labelText,n.id)},addBtns:function e(){s.content.insertBefore(n("btn-close-top","x",this.closeBox),s.content.firstChild);s.content.appendChild(n("btn-close-bottom","close",this.closeBox))},removeBtns:function e(){var t=s.obj.querySelector(".btn-close-top");var n=s.obj.querySelector(".btn-close-bottom");t.remove();n.remove()},hasNH:function e(t){if(null===s.obj.querySelector(".markup_bg_"+t[0]))return false;else return true},openBox:function e(t){a.obj=document.querySelector("[aria-controls="+t+"]");this.obj=document.getElementById(t);this.content=this.obj.children[l.envIndex];this.labelText=this.content.children[l.envIndex].textContent;l.manageScreen("open");this.addBtns();this.obj.setAttribute("aria-hidden","false");this.obj.addEventListener("dblclick",this.closeBox);this.content.addEventListener("dblclick",function(e){e.stopPropagation()});l.manageFocus("open")},closeBox:function e(){s.obj.setAttribute("aria-hidden","true");s.removeBtns();l.manageScreen("close");l.manageFocus("close");a.flag.manageFlags(6)}};var a={setTrigger:function e(n,o){t(this.obj,{"aria-controls":o,title:"Click to open "+n});this.obj.addEventListener("click",function(e){e.preventDefault();l.activeRef=this.href.slice(this.href.indexOf("#")+1);s.openBox(l.activeRef)})},flag:{colors:[["1","yellow highlights","h_yellow"],["2","purple highlights","h_purple"],["3","green highlights","h_green"],["4","yellow notes","n_yellow"],["5","blue notes","n_blue"],["6","green notes","n_green"]],addFlag:function e(n){var r=a.obj.querySelectorAll("[class^=flag_]");var l=document.createElement("img");t(l,{class:"flag_"+n[0]+"_ap",title:o(n[1])+" are inside box.",alt:o(n[1])+" are inside box.",src:"https://ne.edgecastcdn.net/0004BA/constellation/popup/"+n[2]+".png",style:"left: "+i(r.length,13)+";"});a.obj.insertBefore(l,a.obj.firstChild)},removeFlag:function e(t){a.obj.querySelector(".flag_"+t[0]+"_ap").remove();a.obj.querySelectorAll("[class^=flag_]").forEach(function(e,t){e.setAttribute("style","left: "+i(t,13))})},hasFlag:function e(t){if(null===a.obj.querySelector(".flag_"+t[0]+"_ap"))return false;else return true},manageFlags:function e(t){function n(e){if(s.hasNH(e)&&!a.flag.hasFlag(e))a.flag.addFlag(e);else if(!s.hasNH(e)&&a.flag.hasFlag(e))a.flag.removeFlag(e);else return}for(var o=0;o<t;o++)n(this.colors[o])}}};l.setPage()})();