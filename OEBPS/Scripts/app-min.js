!function(){"use strict";function e(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var t,n,o,i,c,r,s,a;!function(){var e,t,n,o,i,c,r,s=document.querySelectorAll("[aria-expanded][aria-controls]");s.length>0&&s.forEach(function(s){i=s.getAttribute("aria-controls"),c=document.querySelector("#"+i),r=document.querySelector("[name='"+i+"']"),c.classList.add("ec_collapsed"),s.addEventListener("click",function(){var t;e="false"===(t=this).getAttribute("aria-expanded"),n=document.getElementById(t.getAttribute("aria-controls")),e?(t.setAttribute("aria-expanded","true"),n.classList.replace("ec_collapsed","ec_expanded")):(t.setAttribute("aria-expanded","false"),n.classList.replace("ec_expanded","ec_collapsed"))},!1),r.addEventListener("click",function(){t=this.getAttribute("name"),o=document.querySelector("[aria-controls='"+t+"']"),n=document.getElementById(t),o.setAttribute("aria-expanded","false"),n.classList.replace("ec_expanded","ec_collapsed")},!1)})}(),t=e(document.querySelectorAll(".figure_name")).length>0,n=document.querySelector("section.page"),o=function(e,t){for(var n=Object.keys(t),o=0;o<n.length;o++)e.setAttribute(n[o],t[n[o]])},i=function(e,t){var n=document.createElement(e);return o(n,t),n},c=function(e){o(e,{role:"button",tabindex:"0",style:"cursor: pointer",title:"click to enlarge this image"}),e.addEventListener("click",function(e){s(e,this)},!1),e.addEventListener("keyup",function(e){s(e,this)},!1)},r=function(e){var t=i("figure",{class:"figure_enlarged",tabindex:"0"}),o=i("img",e);t.addEventListener("click",function(e){a(e,this)},!1),t.addEventListener("keyup",function(e){a(e,this)},!1),t.appendChild(o),n.appendChild(t),t.focus()},s=function e(t,n){function o(e){var t={title:"click to close image",class:"img_enlarged",style:"cursor: pointer;",src:e.getAttribute("src"),alt:e.getAttribute("alt")};r(t)}"click"===t.type?function(t,n){o(n),t.target.removeEventListener("keyup",function(t){e(t,this)},!1)}(t,n):function(t,n){t.preventDefault(),9!==t.keyCode&&(o(n),t.target.removeEventListener("keyup",function(t){e(t,this)},!1))}(t,n)},a=function(e,t){t.querySelector("img").remove(),t.remove()},t&&function(){for(var t=e(document.querySelectorAll("figure")),n=0;n<t.length;n++){var o=t[n];if(null!=o.querySelector(".figure_name")){var i=o.querySelector("img");console.log(i),c(i)}}}(),function(){var e=document.querySelectorAll("[class^=tipBox]").length>0;function t(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function n(e,n,o){var i=document.createElement("button"),c=document.createTextNode(n);return i.appendChild(c),t(i,{type:"button","aria-label":"Close",class:e}),i.addEventListener("click",o),i}var o={triggers:document.querySelectorAll("[data-type=tipTrigger]"),boxes:document.querySelectorAll("[class^=tipBox]"),manageScreen:function(e){"open"===e?(this.body=document.querySelector("body"),this.screen=document.createElement("div"),t(this.screen,{style:"position: fixed; top: 0; left: 0; right: 0; height: 100%; z-index: 4599; background-color: black; opacity: .65;",id:"tipBox_screen"}),this.body.insertBefore(this.screen,this.body.firstChild),document.getElementsByTagName("html")[0].setAttribute("style","overflow: hidden;")):"close"===e&&(this.screen=document.getElementById("tipBox_screen"),this.screen.remove(),document.getElementsByTagName("html")[0].removeAttribute("style"))},setENV:function(){null===document.querySelector("span.werd")?this.envIndex=0:this.envIndex=1},setBoxes:function(){this.boxes.forEach(function(e){i.setBox(e)})},setEsc:function(){document.addEventListener("keydown",function(e){27===e.keyCode&&i.closeBox()})},manageFocus:function(e){if("open"===e)i.obj.focus(),document.addEventListener("keydown",function(e){var t=i.obj.querySelectorAll("a, button, iframe, [tabindex]"),n=t[0],o=t[t.length-1],c="Tab"===e.key||9===e.keyCode,r="escape"===e.key||27===e.keyCode;(c||r)&&(e.shiftKey?document.activeElement===n&&(o.focus(),e.preventDefault()):c&&document.activeElement===o&&(n.focus(),e.preventDefault()))});else{if("close"!==e)return;c.obj.focus()}},setPage:function(){this.setENV(),this.setBoxes(),this.setEsc()}},i={setBox:function(e){this.content=e.children[o.envIndex],this.label=i.content.children[o.envIndex],this.content.setAttribute("role","document"),this.label.setAttribute("id","".concat(e.id)),this.labelText=this.label.textContent,t(e,{"aria-hidden":"true",role:"dialog",tabindex:0,"aria-labelledby":"".concat(e.id,"-label")}),c.obj=document.querySelector("[href$=".concat(e.id,"]")),c.setTrigger(this.labelText,e.id)},addBtns:function(){i.content.insertBefore(n("btn-close-top","x",this.closeBox),i.content.firstChild),i.content.appendChild(n("btn-close-bottom","close",this.closeBox))},removeBtns:function(){var e=i.obj.querySelector(".btn-close-top"),t=i.obj.querySelector(".btn-close-bottom");e.remove(),t.remove()},openBox:function(e){c.obj=document.querySelector("[aria-controls=".concat(e,"]")),this.obj=document.getElementById(e),this.content=this.obj.children[o.envIndex],this.labelText=this.content.children[o.envIndex].textContent,o.manageScreen("open"),this.addBtns(),this.obj.setAttribute("aria-hidden","false"),this.obj.addEventListener("dblclick",this.closeBox),this.content.addEventListener("dblclick",function(e){e.stopPropagation()}),o.manageFocus("open")},closeBox:function(){i.obj.setAttribute("aria-hidden","true"),i.removeBtns(),o.manageScreen("close"),o.manageFocus("close")}},c={setTrigger:function(e,n){t(this.obj,{"aria-controls":n,title:"Click to open ".concat(e)}),this.obj.addEventListener("click",function(e){e.preventDefault(),o.activeRef=this.href.slice(this.href.indexOf("#")+1),i.openBox(o.activeRef)})}};e&&o.setPage()}()}();